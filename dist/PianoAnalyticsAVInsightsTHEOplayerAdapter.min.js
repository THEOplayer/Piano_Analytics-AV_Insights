!function(e){var a={};function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)t.d(n,i,function(a){return e[a]}.bind(null,i));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=0)}([function(e,a,t){"use strict";function n(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,a,t){return a&&n(e.prototype,a),t&&n(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,a,t){r(e,a),a.set(e,t)}function r(e,a){if(a.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,a){return function(e,a){if(a.get)return a.get.call(e);return a.value}(e,c(e,a,"get"))}function s(e,a,t){return function(e,a,t){if(a.set)a.set.call(e,t);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=t}}(e,c(e,a,"set"),t),t}function c(e,a,t){if(!a.has(e))throw new TypeError("attempted to "+t+" private field on non-instance");return a.get(e)}t.r(a),t.d(a,"AVInsights",(function(){return K}));var p=new WeakMap,d=new WeakMap,u=new WeakMap,v=new WeakMap,y=new WeakMap,w=new WeakMap,f=new WeakMap,h=new WeakMap,b=new WeakMap,g=new WeakMap,k=new WeakMap,m=new WeakMap,M=new WeakMap,_=new WeakMap,E=new WeakSet,W=new WeakMap,L=new WeakMap,T=new WeakMap,P=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakMap,j=new WeakMap,A=new WeakMap,x=new WeakMap,R=new WeakMap,V=new WeakMap,H=new WeakMap,C=new WeakMap,z=new WeakMap,D=new WeakMap,K=i((function e(a,t){var n,i,c=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),r(n=this,i=E),i.add(n),l(this,p,{writable:!0,value:void 0}),l(this,d,{writable:!0,value:void 0}),l(this,u,{writable:!0,value:void 0}),l(this,v,{writable:!0,value:void 0}),l(this,y,{writable:!0,value:void 0}),l(this,w,{writable:!0,value:void 0}),l(this,f,{writable:!0,value:void 0}),l(this,h,{writable:!0,value:void 0}),l(this,b,{writable:!0,value:void 0}),l(this,g,{writable:!0,value:void 0}),l(this,k,{writable:!0,value:void 0}),l(this,m,{writable:!0,value:void 0}),l(this,M,{writable:!0,value:void 0}),l(this,_,{writable:!0,value:void 0}),l(this,W,{writable:!0,value:function(){c.player.removeEventListener("play",o(c,W)),o(c,w)&&console.log("media.play("+o(c,L).call(c)+");"),o(c,u).play(o(c,L).call(c))}}),l(this,L,{writable:!0,value:function(e){return e?Math.floor(1e3*e):Math.floor(1e3*c.player.currentTime)}}),l(this,T,{writable:!0,value:function(e){o(c,w)&&console.log("media.bufferStart("+o(c,L).call(c)+");"),o(c,u).bufferStart(o(c,L).call(c))}}),l(this,P,{writable:!0,value:function(e){s(c,f,!0),player.removeEventListener("playing",o(c,P)),o(c,w)&&console.log("media.playbackStart("+o(c,L).call(c,e.currentTime)+");"),o(c,u).playbackStart(e.currentTime)}}),l(this,S,{writable:!0,value:function(e){o(c,h)||(o(c,_)?(o(c,w)&&console.log("adMedia.playbackPaused("+o(c,L).call(c)+");"),o(c,v).playbackPaused(o(c,L).call(c))):(o(c,w)&&console.log("media.playbackPaused("+o(c,L).call(c)+");"),o(c,u).playbackPaused(o(c,L).call(c))))}}),l(this,O,{writable:!0,value:function(e){o(c,M)||c.player.ads.playing||s(c,m,c.player.currentTime)}}),l(this,I,{writable:!0,value:function(e){c.player.ads.playing||s(c,k,1e3*e.duration)}}),l(this,j,{writable:!0,value:function(e){s(c,M,!0)}}),l(this,A,{writable:!0,value:function(e){if(s(c,M,!1),o(c,f)){var a=c.player.currentTime;o(c,w)&&console.log("media.seek("+o(c,L).call(c,o(c,m))+","+o(c,L).call(c,a)+");"),o(c,u).seek(o(c,L).call(c,o(c,m)),o(c,L).call(c,a))}}}),l(this,x,{writable:!0,value:function(e){!o(c,f)||o(c,M)||c.player.ads.playing||(o(c,w)&&console.log("media.playbackResumed("+o(c,L).call(c)+");"),o(c,u).playbackResumed(o(c,L).call(c)))}}),l(this,R,{writable:!0,value:function(e){o(c,f)&&(s(c,h,!0),o(c,w)&&console.log("media.playbackStopped("+o(c,L).call(c)+");"),o(c,u).playbackStopped(o(c,L).call(c)))}}),l(this,V,{writable:!0,value:function(){s(c,k,o(c,y).av_content_duration||player.duration);var e={av_content_id:o(c,y).av_content_id,av_content:o(c,y).av_content,av_content_type:o(c,y).av_content_type,av_content_duration:o(c,k),av_content_genre:o(c,y).av_content_genre,av_player:"THEOplayer Web SDK",av_player_version:window.THEOplayer&&window.THEOplayer.version};o(c,w)&&console.log("calling media.setProps with",e),o(c,u).setProps(e)}}),l(this,H,{writable:!0,value:function(e){s(c,g,e.ad.integration&&"google-ima"==e.ad.integration),s(c,v,new(o(c,d).avInsights.Media)(5,5));var a=e.ad,t=o(c,m)+5>o(c,k)/1e3,n=o(c,m)<.5?"preroll":t?"postroll":"midroll",i={av_content_id:a.creativeId,av_content:n+"-"+a.creativeId,av_content_type:"video",av_ad_type:n,av_content_linked:o(c,u).getProps().av_content_id,av_content_duration:o(c,L).call(c,a.duration)};o(c,w)&&console.log("calling adMedia.setProps with",i),o(c,v).setProps(i)}}),l(this,C,{writable:!0,value:function(e){c.player.ads.playing&&!o(c,_)&&(o(c,g)&&(o(c,u).playbackPaused(o(c,L).call(c,o(c,m))),o(c,w)&&console.log("media.playbackPaused("+o(c,L).call(c,o(c,m))+")")),o(c,w)&&(console.log("adMedia.play("+o(c,L).call(c)+")"),console.log("adMedia.playbackStart("+o(c,L).call(c)+")")),o(c,v).play(o(c,L).call(c)),o(c,v).playbackStart(o(c,L).call(c))),c.player.ads.playing&&s(c,_,!0)}}),l(this,z,{writable:!0,value:function(e){o(c,_)&&(o(c,w)&&console.log("adMedia.playbackResumed("+o(c,L).call(c)+");"),o(c,v).playbackResumed(o(c,L).call(c)))}}),l(this,D,{writable:!0,value:function(e){s(c,_,!1),o(c,w)&&console.log("adMedia.playbackStopped("+o(c,L).call(c,e.ad.duration)+")"),o(c,v).playbackStopped(o(c,L).call(c,e.ad.duration))}}),this.player=a,this.configuration=t,function(e,a,t){if(!a.has(e))throw new TypeError("attempted to get private field on non-instance");return t}(this,E,q).call(this)}));function q(){var e,a,t,n=this;s(this,p,null===(e=this.configuration)||void 0===e?void 0:e.accountId),t=o(this,p)?new ATInternet.Tracker.Tag({site:o(this,p)}):new ATInternet.Tracker.Tag,s(this,u,new t.avInsights.Media(5,5)),s(this,d,t),s(this,f,!1),s(this,h,!1),s(this,b,[]),s(this,v,{}),s(this,g,!1),s(this,y,!1),s(this,w,null===(a=this.configuration)||void 0===a?void 0:a.debug),s(this,k,-1),s(this,m,-1),s(this,M,!1),s(this,_,!1),o(this,w)&&console.log("Piano Analytics version:",o(this,d).version),player.addEventListener("sourcechange",(function(e){o(n,w)&&console.log("sourcechange",e.source),e.source.pianoAnalyticsAVInsights&&(s(n,y,e.source.pianoAnalyticsAVInsights.metadata),s(n,f,!1),s(n,h,!1),o(n,V).call(n),s(n,b,[]),s(n,v,{}),player.removeEventListener("play",o(n,W)),player.addEventListener("play",o(n,W)),player.removeEventListener("waiting",o(n,T)),player.addEventListener("waiting",o(n,T)),player.removeEventListener("playing",o(n,P)),player.addEventListener("playing",o(n,P)),player.removeEventListener("pause",o(n,S)),player.addEventListener("pause",o(n,S)),player.removeEventListener("timeupdate",o(n,O)),player.addEventListener("timeupdate",o(n,O)),player.removeEventListener("durationchange",o(n,I)),player.addEventListener("durationchange",o(n,I)),player.removeEventListener("seeking",o(n,j)),player.addEventListener("seeking",o(n,j)),player.removeEventListener("seeked",o(n,A)),player.addEventListener("seeked",o(n,A)),player.removeEventListener("playing",o(n,x)),player.addEventListener("playing",o(n,x)),player.removeEventListener("ended",o(n,R)),player.addEventListener("ended",o(n,R)),player.ads.removeEventListener("adbegin",o(n,H)),player.ads.addEventListener("adbegin",o(n,H)),player.removeEventListener("playing",o(n,C)),player.addEventListener("playing",o(n,C)),player.ads.removeEventListener("adend",o(n,D)),player.ads.addEventListener("adend",o(n,D)),player.removeEventListener("play",o(n,z)),player.addEventListener("play",o(n,z)))}))}window.AVInsights=K}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BpYW5vQW5hbHl0aWNzQVZJbnNpZ2h0c1RIRU9wbGF5ZXJBZGFwdGVyMi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkFWSW5zaWdodHMiLCJwbGF5ZXIiLCJjb25maWd1cmF0aW9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJwbGF5IiwidmFsdWVJblNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJjdXJyZW50VGltZSIsImV2ZW50IiwiYnVmZmVyU3RhcnQiLCJwbGF5YmFja1N0YXJ0IiwicGxheWJhY2tQYXVzZWQiLCJhZHMiLCJwbGF5aW5nIiwiZHVyYXRpb24iLCJuZXdDdXJzb3JQb3NpdGlvbiIsInNlZWsiLCJwbGF5YmFja1Jlc3VtZWQiLCJwbGF5YmFja1N0b3BwZWQiLCJwcm9wZXJ0aWVzIiwiYXZfY29udGVudF9pZCIsImF2X2NvbnRlbnQiLCJhdl9jb250ZW50X3R5cGUiLCJhdl9jb250ZW50X2R1cmF0aW9uIiwiYXZfY29udGVudF9nZW5yZSIsImF2X3BsYXllciIsImF2X3BsYXllcl92ZXJzaW9uIiwid2luZG93IiwiVEhFT3BsYXllciIsInZlcnNpb24iLCJzZXRQcm9wcyIsImFkIiwiaW50ZWdyYXRpb24iLCJhdkluc2lnaHRzIiwiaXNQb3N0cm9sbCIsImFkVHlwZSIsImNyZWF0aXZlSWQiLCJhdl9hZF90eXBlIiwiYXZfY29udGVudF9saW5rZWQiLCJnZXRQcm9wcyIsInRoaXMiLCJ0YWciLCJhY2NvdW50SWQiLCJBVEludGVybmV0IiwiVHJhY2tlciIsIlRhZyIsInNpdGUiLCJNZWRpYSIsImRlYnVnIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvdXJjZSIsInBpYW5vQW5hbHl0aWNzQVZJbnNpZ2h0cyIsIm1ldGFkYXRhIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdB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LEVBQXVDLEVBQXZDLElBQ0FuRCxPQUFPRSxvQkFBb0IsVUFBM0IsRUFBc0MsRUFBdEMsSUFDQUYsT0FBT21ELGlCQUFpQixVQUF4QixFQUFtQyxFQUFuQyxJQUNBbkQsT0FBT2MsSUFBSVosb0JBQW9CLFFBQS9CLEVBQXdDLEVBQXhDLElBQ0FGLE9BQU9jLElBQUlxQyxpQkFBaUIsUUFBNUIsRUFBcUMsRUFBckMsSUFDQW5ELE9BQU9FLG9CQUFvQixPQUEzQixFQUFtQyxFQUFuQyxJQUNBRixPQUFPbUQsaUJBQWlCLE9BQXhCLEVBQWdDLEVBQWhDLFFBOEtOdEIsT0FBTzlCLFdBQWFBIiwiZmlsZSI6IlBpYW5vQW5hbHl0aWNzQVZJbnNpZ2h0c1RIRU9wbGF5ZXJBZGFwdGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjbGFzcyBBVkluc2lnaHRzIHtcblxuICAjYWNjb3VudElkXG4gICN0YWdcbiAgI21lZGlhXG4gICNhZE1lZGlhXG4gICNtZXRhZGF0YVxuICAjREVCVUdcbiAgI2ZpcnN0UGxheURvbmVcbiAgI2VuZGVkXG4gICNldmVudHNcbiAgI2lzR29vZ2xlSW1hXG4gICNkdXJhdGlvblxuICAjb2xkQ3Vyc29yUG9zaXRpb25cbiAgI3NlZWtpbmdcbiAgI2RpZEFkUGxheWJhY2tTdGFydFxuXG4gIGNvbnN0cnVjdG9yKHBsYXllciwgY29uZmlndXJhdGlvbikge1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgdGhpcy4jaW5pdCgpO1xuICB9XG4gICNpbml0KCkge1xuICAgIHRoaXMuI2FjY291bnRJZCA9IHRoaXMuY29uZmlndXJhdGlvbj8uYWNjb3VudElkO1xuICAgIGxldCB0YWc7XG4gICAgaWYgKHRoaXMuI2FjY291bnRJZCkge1xuICAgICAgdGFnID0gbmV3IEFUSW50ZXJuZXQuVHJhY2tlci5UYWcoeyBzaXRlOiB0aGlzLiNhY2NvdW50SWQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhZyA9IG5ldyBBVEludGVybmV0LlRyYWNrZXIuVGFnKCk7XG4gICAgfVxuICAgIHRoaXMuI21lZGlhID0gbmV3IHRhZy5hdkluc2lnaHRzLk1lZGlhKDUsIDUpO1xuICAgIHRoaXMuI3RhZyA9IHRhZztcbiAgICB0aGlzLiNmaXJzdFBsYXlEb25lID0gZmFsc2U7XG4gICAgdGhpcy4jZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLiNldmVudHMgPSBbXTtcbiAgICB0aGlzLiNhZE1lZGlhID0ge307XG4gICAgdGhpcy4jaXNHb29nbGVJbWEgPSBmYWxzZTtcbiAgICB0aGlzLiNtZXRhZGF0YSA9IGZhbHNlO1xuICAgIHRoaXMuI0RFQlVHID0gdGhpcy5jb25maWd1cmF0aW9uPy5kZWJ1ZztcbiAgICB0aGlzLiNkdXJhdGlvbiA9IC0xO1xuICAgIHRoaXMuI29sZEN1cnNvclBvc2l0aW9uID0gLTE7XG4gICAgdGhpcy4jc2Vla2luZyA9IGZhbHNlO1xuICAgIHRoaXMuI2RpZEFkUGxheWJhY2tTdGFydCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgY29uc29sZS5sb2coXCJQaWFubyBBbmFseXRpY3MgdmVyc2lvbjpcIiwgdGhpcy4jdGFnLnZlcnNpb24pO1xuICAgIH1cbiAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignc291cmNlY2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy4jREVCVUcpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzb3VyY2VjaGFuZ2VcIiwgZXZlbnQuc291cmNlKTtcbiAgICAgIH1cbiAgICAgIGlmICghZXZlbnQuc291cmNlLnBpYW5vQW5hbHl0aWNzQVZJbnNpZ2h0cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLiNtZXRhZGF0YSA9IGV2ZW50LnNvdXJjZS5waWFub0FuYWx5dGljc0FWSW5zaWdodHMubWV0YWRhdGE7XG4gICAgICB0aGlzLiNmaXJzdFBsYXlEb25lID0gZmFsc2U7XG4gICAgICB0aGlzLiNlbmRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4jdXBkYXRlTWVkaWEoKTtcbiAgICAgIHRoaXMuI2V2ZW50cyA9IFtdO1xuICAgICAgdGhpcy4jYWRNZWRpYSA9IHt9O1xuICAgICAgcGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXknLCB0aGlzLiNwbGF5KTtcbiAgICAgIHBsYXllci5hZGRFdmVudExpc3RlbmVyKCdwbGF5JywgdGhpcy4jcGxheSk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2FpdGluZycsIHRoaXMuI2J1ZmZlclN0YXJ0KTtcbiAgICAgIHBsYXllci5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgdGhpcy4jYnVmZmVyU3RhcnQpO1xuICAgICAgcGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCB0aGlzLiNwbGF5YmFja1N0YXJ0KTtcbiAgICAgIHBsYXllci5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgdGhpcy4jcGxheWJhY2tTdGFydCk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGF1c2UnLCB0aGlzLiNwbGF5YmFja1BhdXNlZCk7XG4gICAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCB0aGlzLiNwbGF5YmFja1BhdXNlZCk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIHRoaXMuI29sZEN1cnNvclBvc2l0aW9uSGFuZGxlcik7XG4gICAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIHRoaXMuI29sZEN1cnNvclBvc2l0aW9uSGFuZGxlcik7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHVyYXRpb25jaGFuZ2UnLCB0aGlzLiNkdXJhdGlvbkhhbmRsZXIpO1xuICAgICAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2R1cmF0aW9uY2hhbmdlJywgdGhpcy4jZHVyYXRpb25IYW5kbGVyKTtcbiAgICAgIHBsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWVraW5nJywgdGhpcy4jc2Vla0hhbmRsZXIpO1xuICAgICAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3NlZWtpbmcnLCB0aGlzLiNzZWVrSGFuZGxlcik7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Vla2VkJywgdGhpcy4jc2Vlayk7XG4gICAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Vla2VkJywgdGhpcy4jc2Vlayk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGxheWluZycsIHRoaXMuI3BsYXliYWNrUmVzdW1lZCk7XG4gICAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsIHRoaXMuI3BsYXliYWNrUmVzdW1lZCk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCB0aGlzLiNwbGF5YmFja1N0b3BwZWQpO1xuICAgICAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgdGhpcy4jcGxheWJhY2tTdG9wcGVkKTtcblxuICAgICAgLy8gQURTXG4gICAgICBwbGF5ZXIuYWRzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZGJlZ2luXCIsIHRoaXMuI3NldEFkUHJvcHMpO1xuICAgICAgcGxheWVyLmFkcy5hZGRFdmVudExpc3RlbmVyKFwiYWRiZWdpblwiLCB0aGlzLiNzZXRBZFByb3BzKTtcbiAgICAgIHBsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLCB0aGlzLiNhZFBsYXkpO1xuICAgICAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5aW5nXCIsIHRoaXMuI2FkUGxheSk7XG4gICAgICBwbGF5ZXIuYWRzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZGVuZFwiLCB0aGlzLiNhZFBsYXliYWNrU3RvcHBlZCk7XG4gICAgICBwbGF5ZXIuYWRzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGVuZFwiLCB0aGlzLiNhZFBsYXliYWNrU3RvcHBlZCk7XG4gICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGxheScsIHRoaXMuI2FkUGxheWJhY2tSZXN1bWVkKTtcbiAgICAgIHBsYXllci5hZGRFdmVudExpc3RlbmVyKCdwbGF5JywgdGhpcy4jYWRQbGF5YmFja1Jlc3VtZWQpO1xuXG4gICAgfSk7XG4gIH1cbiAgI3BsYXkgPSAoKSA9PiB7XG4gICAgdGhpcy5wbGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGxheScsIHRoaXMuI3BsYXkpO1xuICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgY29uc29sZS5sb2coXCJtZWRpYS5wbGF5KFwiICsgdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSArIFwiKTtcIilcbiAgICB9XG4gICAgdGhpcy4jbWVkaWEucGxheSh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgfVxuXG4gICNnZXRDdXJzb3JQb3NpdGlvbiA9ICh2YWx1ZUluU2Vjb25kcykgPT4ge1xuICAgIGlmICghdmFsdWVJblNlY29uZHMpIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMucGxheWVyLmN1cnJlbnRUaW1lICogMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHZhbHVlSW5TZWNvbmRzICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgI2J1ZmZlclN0YXJ0ID0gKGV2ZW50KSA9PiB7XG4gICAgLy8gcGxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCBidWZmZXJTdGFydCk7XG4gICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIm1lZGlhLmJ1ZmZlclN0YXJ0KFwiICsgdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSArIFwiKTtcIilcbiAgICB9XG4gICAgdGhpcy4jbWVkaWEuYnVmZmVyU3RhcnQodGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSk7XG4gIH1cblxuICAjcGxheWJhY2tTdGFydCA9IChldmVudCkgPT4ge1xuICAgIHRoaXMuI2ZpcnN0UGxheURvbmUgPSB0cnVlO1xuICAgIHBsYXllci5yZW1vdmVFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgdGhpcy4jcGxheWJhY2tTdGFydCk7XG4gICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIm1lZGlhLnBsYXliYWNrU3RhcnQoXCIgKyB0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbihldmVudC5jdXJyZW50VGltZSkgKyBcIik7XCIpXG4gICAgfVxuICAgIHRoaXMuI21lZGlhLnBsYXliYWNrU3RhcnQoZXZlbnQuY3VycmVudFRpbWUpO1xuICB9XG5cbiAgI3BsYXliYWNrUGF1c2VkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKCF0aGlzLiNlbmRlZCkge1xuICAgICAgaWYgKHRoaXMuI2RpZEFkUGxheWJhY2tTdGFydCkge1xuICAgICAgICBpZiAodGhpcy4jREVCVUcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImFkTWVkaWEucGxheWJhY2tQYXVzZWQoXCIgKyB0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpICsgXCIpO1wiKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FkTWVkaWEucGxheWJhY2tQYXVzZWQodGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy4jREVCVUcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm1lZGlhLnBsYXliYWNrUGF1c2VkKFwiICsgdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSArIFwiKTtcIilcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNtZWRpYS5wbGF5YmFja1BhdXNlZCh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG4gICNvbGRDdXJzb3JQb3NpdGlvbkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoIXRoaXMuI3NlZWtpbmcgJiYgIXRoaXMucGxheWVyLmFkcy5wbGF5aW5nKSB7XG4gICAgICB0aGlzLiNvbGRDdXJzb3JQb3NpdGlvbiA9IHRoaXMucGxheWVyLmN1cnJlbnRUaW1lO1xuICAgIH1cbiAgfVxuXG4gICNkdXJhdGlvbkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoIXRoaXMucGxheWVyLmFkcy5wbGF5aW5nKSB7XG4gICAgICB0aGlzLiNkdXJhdGlvbiA9IGV2ZW50LmR1cmF0aW9uICogMTAwMDtcbiAgICB9XG4gIH1cblxuICAjc2Vla0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICB0aGlzLiNzZWVraW5nID0gdHJ1ZTtcbiAgfVxuXG4gICNzZWVrID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy4jc2Vla2luZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLiNmaXJzdFBsYXlEb25lKSB7XG4gICAgICBjb25zdCBuZXdDdXJzb3JQb3NpdGlvbiA9IHRoaXMucGxheWVyLmN1cnJlbnRUaW1lO1xuICAgICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibWVkaWEuc2VlayhcIiArIHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKHRoaXMuI29sZEN1cnNvclBvc2l0aW9uKSArIFwiLFwiICsgdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24obmV3Q3Vyc29yUG9zaXRpb24pICsgXCIpO1wiKVxuICAgICAgfVxuICAgICAgdGhpcy4jbWVkaWEuc2Vlayh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbih0aGlzLiNvbGRDdXJzb3JQb3NpdGlvbiksIHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKG5ld0N1cnNvclBvc2l0aW9uKSk7XG4gICAgfVxuICB9XG5cbiAgI3BsYXliYWNrUmVzdW1lZCA9IChldmVudCkgPT4ge1xuICAgIGlmICh0aGlzLiNmaXJzdFBsYXlEb25lICYmICF0aGlzLiNzZWVraW5nICYmICF0aGlzLnBsYXllci5hZHMucGxheWluZykge1xuICAgICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibWVkaWEucGxheWJhY2tSZXN1bWVkKFwiICsgdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSArIFwiKTtcIilcbiAgICAgIH1cbiAgICAgIHRoaXMuI21lZGlhLnBsYXliYWNrUmVzdW1lZCh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICB9XG4gIH1cblxuICAjcGxheWJhY2tTdG9wcGVkID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuI2ZpcnN0UGxheURvbmUpIHtcbiAgICAgIHRoaXMuI2VuZGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1lZGlhLnBsYXliYWNrU3RvcHBlZChcIiArIHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKCkgKyBcIik7XCIpXG4gICAgICB9XG4gICAgICB0aGlzLiNtZWRpYS5wbGF5YmFja1N0b3BwZWQodGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24oKSk7XG4gICAgfVxuICB9XG5cbiAgI3VwZGF0ZU1lZGlhID0gKCkgPT4ge1xuICAgIHRoaXMuI2R1cmF0aW9uID0gdGhpcy4jbWV0YWRhdGFbXCJhdl9jb250ZW50X2R1cmF0aW9uXCJdIHx8IHBsYXllci5kdXJhdGlvbjtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgYXZfY29udGVudF9pZDogdGhpcy4jbWV0YWRhdGFbXCJhdl9jb250ZW50X2lkXCJdLFxuICAgICAgYXZfY29udGVudDogdGhpcy4jbWV0YWRhdGFbXCJhdl9jb250ZW50XCJdLFxuICAgICAgYXZfY29udGVudF90eXBlOiB0aGlzLiNtZXRhZGF0YVtcImF2X2NvbnRlbnRfdHlwZVwiXSxcbiAgICAgIGF2X2NvbnRlbnRfZHVyYXRpb246IHRoaXMuI2R1cmF0aW9uLFxuICAgICAgYXZfY29udGVudF9nZW5yZTogdGhpcy4jbWV0YWRhdGFbXCJhdl9jb250ZW50X2dlbnJlXCJdLFxuICAgICAgYXZfcGxheWVyOiBcIlRIRU9wbGF5ZXIgV2ViIFNES1wiLFxuICAgICAgYXZfcGxheWVyX3ZlcnNpb246IHdpbmRvdy5USEVPcGxheWVyICYmIHdpbmRvdy5USEVPcGxheWVyLnZlcnNpb25cbiAgICB9O1xuICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgY29uc29sZS5sb2coXCJjYWxsaW5nIG1lZGlhLnNldFByb3BzIHdpdGhcIiwgcHJvcGVydGllcyk7XG4gICAgfVxuICAgIHRoaXMuI21lZGlhLnNldFByb3BzKHByb3BlcnRpZXMpO1xuICB9XG5cbiAgI3NldEFkUHJvcHMgPSAoZXZlbnQpID0+IHtcbiAgICB0aGlzLiNpc0dvb2dsZUltYSA9IGV2ZW50LmFkLmludGVncmF0aW9uICYmIChldmVudC5hZC5pbnRlZ3JhdGlvbiA9PSBcImdvb2dsZS1pbWFcIik7XG4gICAgdGhpcy4jYWRNZWRpYSA9IG5ldyB0aGlzLiN0YWcuYXZJbnNpZ2h0cy5NZWRpYSg1LDUpO1xuICAgIGNvbnN0IGFkID0gZXZlbnQuYWQ7XG4gICAgY29uc3QgaXNQb3N0cm9sbCA9ICh0aGlzLiNvbGRDdXJzb3JQb3NpdGlvbiArIDUgPiAodGhpcy4jZHVyYXRpb24vMTAwMCkpO1xuICAgIGNvbnN0IGlzUHJlcm9sbCA9ICh0aGlzLiNvbGRDdXJzb3JQb3NpdGlvbiA8IDAuNSk7XG4gICAgY29uc3QgYWRUeXBlID0gaXNQcmVyb2xsID8gKFwicHJlcm9sbFwiKSA6IChpc1Bvc3Ryb2xsID8gXCJwb3N0cm9sbFwiIDogXCJtaWRyb2xsXCIpO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICBhdl9jb250ZW50X2lkIDogYWQuY3JlYXRpdmVJZCxcbiAgICAgIGF2X2NvbnRlbnQgOiBhZFR5cGUrXCItXCIrIGFkLmNyZWF0aXZlSWQsXG4gICAgICBhdl9jb250ZW50X3R5cGUgOiBcInZpZGVvXCIsXG4gICAgICBhdl9hZF90eXBlIDogYWRUeXBlLFxuICAgICAgYXZfY29udGVudF9saW5rZWQgOiB0aGlzLiNtZWRpYS5nZXRQcm9wcygpW1wiYXZfY29udGVudF9pZFwiXSwgLy8gdGhlIElEIG9mIHRoZSBtYWluIGNvbnRlbnRcbiAgICAgIGF2X2NvbnRlbnRfZHVyYXRpb24gOiB0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbihhZC5kdXJhdGlvbilcbiAgICB9O1xuICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgY29uc29sZS5sb2coXCJjYWxsaW5nIGFkTWVkaWEuc2V0UHJvcHMgd2l0aFwiLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgdGhpcy4jYWRNZWRpYS5zZXRQcm9wcyhwcm9wZXJ0aWVzKTtcbiAgfVxuXG4gICNhZFBsYXkgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5wbGF5ZXIuYWRzLnBsYXlpbmcgJiYgIXRoaXMuI2RpZEFkUGxheWJhY2tTdGFydCkge1xuICAgICAgaWYgKHRoaXMuI2lzR29vZ2xlSW1hKSB7XG4gICAgICAgIHRoaXMuI21lZGlhLnBsYXliYWNrUGF1c2VkKHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKHRoaXMuI29sZEN1cnNvclBvc2l0aW9uKSk7XG4gICAgICAgIGlmICh0aGlzLiNERUJVRykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwibWVkaWEucGxheWJhY2tQYXVzZWQoXCIrdGhpcy4jZ2V0Q3Vyc29yUG9zaXRpb24odGhpcy4jb2xkQ3Vyc29yUG9zaXRpb24pK1wiKVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWRNZWRpYS5wbGF5KFwiK3RoaXMuI2dldEN1cnNvclBvc2l0aW9uKCkrXCIpXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImFkTWVkaWEucGxheWJhY2tTdGFydChcIit0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpK1wiKVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI2FkTWVkaWEucGxheSh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICAgIHRoaXMuI2FkTWVkaWEucGxheWJhY2tTdGFydCh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucGxheWVyLmFkcy5wbGF5aW5nKSB7XG4gICAgICB0aGlzLiNkaWRBZFBsYXliYWNrU3RhcnQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICAjYWRQbGF5YmFja1Jlc3VtZWQgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy4jZGlkQWRQbGF5YmFja1N0YXJ0KSB7XG4gICAgICBpZiAodGhpcy4jREVCVUcpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJhZE1lZGlhLnBsYXliYWNrUmVzdW1lZChcIiArIHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKCkgKyBcIik7XCIpXG4gICAgICB9XG4gICAgICB0aGlzLiNhZE1lZGlhLnBsYXliYWNrUmVzdW1lZCh0aGlzLiNnZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICB9XG4gIH1cbiAgI2FkUGxheWJhY2tTdG9wcGVkID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy4jZGlkQWRQbGF5YmFja1N0YXJ0ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuI0RFQlVHKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImFkTWVkaWEucGxheWJhY2tTdG9wcGVkKFwiK3RoaXMuI2dldEN1cnNvclBvc2l0aW9uKGV2ZW50LmFkLmR1cmF0aW9uKStcIilcIik7XG4gICAgfVxuICAgIHRoaXMuI2FkTWVkaWEucGxheWJhY2tTdG9wcGVkKHRoaXMuI2dldEN1cnNvclBvc2l0aW9uKGV2ZW50LmFkLmR1cmF0aW9uKSk7XG4gIH1cblxufVxud2luZG93LkFWSW5zaWdodHMgPSBBVkluc2lnaHRzOyJdLCJzb3VyY2VSb290IjoiIn0=